## 介绍

此仓库为 8 位计算机制作的学习笔记，基于 [Logical Circuit](https://logiccircuit.org/) 和 [踌躇月光](https://space.bilibili.com/491131440) 创造的[B站视频](https://www.bilibili.com/video/BV1aP4y1s7Vf/?spm_id_from=333.337.search-card.all.click&vd_source=c06d092ddfc3e3120c41071600f30c9d)

因为是基于 Logical Circuit，因此它官网的[帮助](https://logiccircuit.org/help.html) 是必看的，可以省去很多麻烦。实在不想看英文，视频下方的 [cnblog](https://www.cnblogs.com/staraire/p/15311504.html) 也很详尽

## 个人心得

### 个人想法

1. 大学时期（数学专业大一上学期）首次接触到计算机编程，当时就想在想这么牛的东西是怎么做的，我也知道这是一个复杂的工程，可能我永远也无法一窥究竟。甚至连计算器都没机会一窥究竟（计算器厂商也不可能从头搞起）。什么都想知道是不是一种病呢？
2. 科学技术的发展是不断迭代前进的。软件的运行最终必然是基于硬件的，但现在做硬件的也要使用软件是设计、控制、生成。我还有机会[手搓 CPU](https://www.bilibili.com/video/BV1sy4y1j7Ue/?spm_id_from=333.337.search-card.all.click&vd_source=f57cf03d6ae1e683e5ef70399eb90a1d) 吗？
3. 此次主要任务是**基于电路实现 8 位 CPU**，但它本质上还是基于软件，或者说模拟器的。那硬件是如何实现与或非，特别是取非的操作呢？其实这前面还有一个问题就是如何表示和保存 0 和 1。即先有集合，再谈集合上的运算。看了 《Code》这本书后，我知道至少从机械上可以用继电器实现取非，用通电表示 1，用不通电表示 0。在这个过程中也消除了一直以来以为电流必须形成回路才行。最原始的继电器基于电生磁（至于为什么就无从知晓了，每一个大世界里都有无数个小世界，真的可以打开所有的黑盒吗？即使打开了又能怎样呢），磁吸引铁皮触发开关断开或闭合，从而实现与或非。知道了最简单最原始的实现方案后，后面利用物理学的其它知识和更先进的材料来实现与或非本质是只是实现的机制不一样，做的事情都是一样的，因此我也就不再去过分关心这件事了。那么现在用模拟器去实现与或非也未尝不可，想清楚这些我也不再纠结硬件到底是怎么实现的了，技术一直在进步，也许几十年之后硬件的实现也发现生翻天覆地的变化呢？再说了这些都是商业机密又怎会让我轻易知道呢？
4. 强迫症不可取，会消耗大量的时间，只要不影响对电路的把控，美观大可不必。实际制造 CPU 的时候，应该会考虑把输入输出的位置，让整体电路最短，使得元器件的时延最小，单位体积内容纳的单位元器件最多。但不是当下的我应该考虑的。
5. NAND 和 NOR 都是完备的，即与或非这些基础器件都可以用 NAND 或 NOR 推导出来，因此只要能制作出这两个中任何一个，就可以构成完整的电路。但我依然没有优先级只基于它们中的一个来构造 8 位计算机
6. 在过往的学习和工作中，总是会分心关注工具本身是如何实现的，而**拖慢了最初目标的进度**。那么一个工具是否需要关心它的实现呢？我想当你非它不可的时候是需要的，当了解工具实现能给当前任务带来启发式的作用时也是需要的，否则完全就是浪费时间，什么都想要，最后什么都没做成。社会有分工，每个人发挥自己的专长，总体才能更快的进步。日常生活中的任何物品从无到有的制作都是十分耗时的，也是没有必要的，电子类的高科技产品更是一个人难以完成的工程，只能说珍惜眼前他人的劳动成果，专注做好当下的事情，为整个社会进步贡献自己的微薄之力
7. ipad 支持 pencil 自然是搞技术含量的事，但即使没有它，用纸和笔不也能平替吗？我们要的只是记录。退一万步讲，即使没法制作纸和笔，用木棍在沙子里写字也能算上记录。因此只有专门做笔的人才需要去搞清楚它的流程和细节，其他人用就完事了
8. 数学的公理，计算机的 API？物理的规则，它们都承自一脉？既然无法剖开所有的黑盒，那就通过一层层的封装，把自己所在层和上下游接口搞清楚就行了，一点点的展开和发展，真要是自己太无敌了，一下子全吃透了，那活着还有什么意思呢

### 软件本身

1. [官方下载界面](https://logiccircuit.org/download.html) 中的[例子](https://logiccircuit.org/downloads/Samples.2.24.02.29.zip) 十分硬核，完全可以照着例子一点点的学，不过 B站 学更轻松
2. 本人当前工作是搞系统建模仿真的，因此对 Logical Circuit 软件本身的实现也比较感兴趣，不过当前没有优先级去思考这个问题。从 [帮助](https://logiccircuit.org/advanced.html) 中 `However all pins are bidirectional, that means you can use either of them for both input and output signal` 这句话看出它是非因果的，大概率是 Modelica 体系的
3. 电路项目以 `.CircuitProject` 为后缀，本质上是一个 xml 文件。基础元器件应该不会保存在这个 xml 中。另外它需要在打开时解析 xml 并进行渲染，并建立选择和拖拽的关联，鼠标键盘的响应。仿真时根据连边关系建立方程，再进行方程的求解，并进行结果的实时渲染。保存文件到 xml
4. 通过查看 xml 可以看出每个 ID 都是一个 HASH 值，通过值来绑定，分类是通过 Category 属性，软件会收集相同的 Category，如果修改后，所有模块都没有此 Category，则不会显示出来，如果想对它改名，可以完全在 xml 中重命名
5. 关于连线，如果两条线相交了但没有出现黑点，则说明它们互不相连。使相交的边相连的方法：鼠标选中一条边，按住 alt 键后再点一次交点，**其实这个动作的本质是在交点处创建一个点**，并将选中的边分成两条边，当软件检测到一个点有三条边时就将这个点加重突出显示。另外组件的接口点都有突出显示
6. 务必注意：** 0 输入和无输入是完全两码事**

### 电路制作

1. 做全加器的时候，本来不想基于半加器来做的，想直接平坦化掉，但后来发现这本质上并没有减少器件数和连边数，故而没有意义
2. 有了一位全加器，8 位全加器也就简单了，当然直接搞效率低，但目前的主要任务是**基于电路实现 8 位 CPU**，能用就行，过早优化是万恶之源
3. 有了 8 位加法器，减法器也就水到渠成了。直到 2024 年 11 月前我还以为减法器 `A - B` 是暴力的通过 `A + (-B)` 实现，后来看了计算机组成原理的书，才知道是通过 `A + (~B) + 1` 实现，其中 1 表示 Carry In。通过这次实验，也验证了这一点。
4. 在做 8bit BCD 时，利用了 ROM 感觉太**作弊了**，不清楚初代的 3bit BCD 是否也是用这种查表法实现的。如果不这么实现还要先实现除法移位等一系列复杂的操作。但目前 8bit BCD 仅用于测试，并非主要部件，因此没必要这么苛刻
5. 完成加法减法器并用7位数码管测试是里程碑的一步
